{% extends "base.html" %}

{% block title %}
    Home: {{ user.username }}
{% endblock %}

{% block content %}
    <h2>Hello {{ user.username }}</h2>
    Here is the list of all your games


    <div class="row">
        <div class="col-md-6" ng-controller="GameListController">
            {% verbatim %}
            <h3>Active games</h3>

            <div class="list-group bg-info">
                <a class="list-group-item list-group-item-info"
                   href="{{ gameObj.absolute_url }}"
                   ng-repeat="gameObj in activeGames">
                    {{ gameObj.string }}
                    <span class="badge">{{ gameObj.moves_count }}</span><br>
                </a>
            </div>

            <h3>Finished games</h3>

            <div class="list-group bg-info">
                <a class="list-group-item list-group-item-info"
                   href="{{ game.absolute_url }}" ng-repeat="game in finishedGames">
                    {{ game.string }}
                    <span class="badge">{{ game.moves_count }}</span>
                </a>
            </div>

            {% endverbatim %}

            <p>
                <a class="btn btn-primary"
                   href="{% url 'player_new_invitation' %}">Send game invitation</a>
            </p>
        </div>
        <div class="col-md-6">
            <h3>Active invitations</h3>

            {% if invitations %}
                <div class="list-group bg-info">
                    {% for inv in invitations %}
                        <a class="list-group-item list-group-item-info" href="{% url 'player_accept_invitation' id=inv.id %}">
                            {{ inv.from_user.username }} invited you to play.
                        <span class="badge">N</span>
                        <span class="badge">Y</span><br>
                        </a>
                    {% endfor %}
                </div>
            {% else %}
                <p>No active invitations</p>
            {% endif %}
        </div>
    </div>

{% endblock %}