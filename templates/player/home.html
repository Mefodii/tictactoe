{% extends "base.html" %}

{% block title %}
    Home: {{ user.username }}
{% endblock %}

{% block content %}
    <h2>Hello {{ user.username }}</h2>
    Here is the list of all your games


    <div class="row" ng-controller="HomeController">
        <div class="col-md-6">
            {% verbatim %}
            <h3>Active games</h3>

            <div class="list-group bg-info">
                <a class="list-group-item list-group-item-info"
                   href="{{ gameObj.absolute_url }}"
                   ng-repeat="gameObj in activeGames">
                    {{ gameObj.string }}
                    <span class="badge badge-move">{{ gameObj.moves_count }}</span><br>
                </a>
            </div>

            <h3>Finished games</h3>

            <div class="list-group bg-info">
                <a class="list-group-item list-group-item-info"
                   href="{{ game.absolute_url }}" ng-repeat="game in finishedGames">
                    {{ game.string }}
                    <span class="badge badge-move">{{ game.moves_count }}</span>
                </a>
            </div>


        </div>
        <div class="col-md-6">
            <h3>Active invitations</h3>
                <div class="list-group bg-info">
                    <a class="list-group-item list-group-item-info"
                       ng-repeat="invitation in activeInvitations">
                        {{ invitation.from_user_username }} invited you to play.
                    <span class="badge invitation-no-button" ng-click="declineInvitation(invitation)">N</span>
                    <span class="badge invitation-yes-button" ng-click="acceptInvitation(invitation)">Y</span><br>
                    </a>
                </div>
            <h3>Waiting for response</h3>
                <div class="list-group bg-info">
                    <a class="list-group-item list-group-item-info"
                       ng-repeat="invitation in waitingResponseInvitations">
                        Waiting response from {{ invitation.to_user_username }}.
                    <span class="badge invitation-no-button" ng-click="cancelInvitation(invitation)">X</span>
                    </a>
                </div>
            <p>
                <select class="form-control" ng-options="user as user.username for user in userList"
                        ng-model="userToInvite"></select>
                <button class="btn btn-primary" ng-click="inviteUser()">Invite User</button>
            {% endverbatim %}
                <a class="btn btn-primary"
                   href="{% url 'player_new_invitation' %}">Send game invitation</a>
            </p>
        </div>
    </div>

{% endblock %}